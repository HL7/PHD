<style>table, th, td {
border: 1px solid black;
border-collapse:collapse;
padding: 6px;}</style>

This chapter is for those whose use cases require measurement data from Personal Health Devices (PHD) and need that data in FHIR format. In most cases PHDs are used when the measurements are taken by individuals who are not medical professionals and outside of the health care provider's institution. The individuals could be patients recovering at home from a serious operation, diabetics managing their condition while trying to live as normal a life as possible, or athletes wearing fitness devices keeping track of their training. Point of Care Devices (PoCD) used in acute care are not covered by this IG. There is a separate implementation guide [here](http://build.fhir.org/ig/HL7/uv-pocd) for such devices.

It is important to understand that this Implementation Guide (IG) assumes that the source of the data is from *communicating* PHDs. This IG does NOT cover measurement data entered manually, such as a pulse rate by putting one's fingers on the wrist, or reading data from a non-communicating medical device. Manual entry of data is subject to human error which this IG does not consider.

Understanding the content of the FHIR resources specified in this IG should be straight forward. Familiarity with the [MDC](http://build.fhir.org/mdc.html) coding system is the only IEEE 11073 domain-specific knowledge required. In addition, there is only one extension used in the PHD related profiles and that is a reference to the Personal Health Gateway (PHG) Device resource in the PHD Observation profiles. A PHG is the unit that is typically responsible for communicating with the PHD and encoding that data into FHIR. It may be a mobile phone, a PC, or a dedicated set-top box. Most of this IG is dedicated to the PHD to FHIR mapping that a PHG must follow. Those sections do require IEEE 11073 domain knowledge.

PHGs following this IG use only three FHIR resources, Patient, Device, and Observation. A Device resource is used for the PHG properties and a second Device resource is used for the PHD properties. Observation resources are used for each measurement and the [Coincident Time Stamp](CoincidentTimeStamp.html). The Coincident Time Stamp will be further discussed in the PHD Coincident Time Stamp Observation Resource section [here](#the-phd-coincident-time-stamp-observation-resource).

The next sections examine each of the resources generated by PHGs following this IG. 

### The Measurement Observation Resources

PHDs measurements are encoded into Observation resources. There are six types of measurement values that can be reported by PHDs. Each measurement value type has its own profile but the profiles differ only in the way the value of the measurement is reported in the Observation resource. The six measurement value types are:

 - **single scalar** such as a temperature, weight, glucose concentration, pulse rate, blood oxygen saturation, or miles run. Scalar measurements are the most common type of measurement and *usually* have a unit. All measurements in this category follow the [Phd Numeric Observation Profile](PhdNumericObservation.html) and can be identified when the Observation.meta.profile="http://hl7.org/fhir/uv/phd/StructureDefinition/PhdNumericObservation".
 - **compound or vector** measurements such as the systolic, diastolic, and mean components of the blood pressure or x-, y-, and z- components of an acceleration. Compound measurements *usually* have units. All measurements in this category follow the [Phd Compound Numeric Observation Profile](PhdCompoundNumericObservation.html) and can be identified when the Observation.meta.profile="http://hl7.org/fhir/uv/phd/StructureDefinition/PhdCompoundNumericObservation".
 - **coded** measurements such as the meal context and health status in a glucose monitor. A coded measurement is used when there is a limited set of options and each option is specified by a code. In the case of the meal context some of the options are pre-meal, post-meal, bedtime, fasting, etc. All measurements in this category follow the [Phd Coded Enumeration Observation Profile](PhdCodedEnumerationObservation.html) and can be identified when the Observation.meta.profile="http://hl7.org/fhir/uv/phd/StructureDefinition/PhdCodedEnumerationObservation".
 - **state or event** measurements which report a set of conditions that may occur simultaneously. An example would be a room status measurement in an independent living facility such as patient in room, door closed, window closed, climate control off, and video monitoring off. All measurements in this category follow the [Phd Bits Enumeration Observation Profile](PhdBitsEnumerationObservation.html) and can be identified when the Observation.meta.profile="http://hl7.org/fhir/uv/phd/StructureDefinition/PhdBitsEnumerationObservation". It should be noted that there is no 'room status' measurement defined for PHDs; it is used here because if it did exist it would be an illustrative example of a state measurement value.
 - **periodic samples** (often waveforms) such as an ECG trace, a forced exhalation flow rate from a spirometer, a pleth wave of a pulse oximeter, or a sequence of heart rates. These measurements are a periodic sequence of scalars and *usually* have units.  All measurements in this category follow the [Phd Rtsa Observation Profile](PhdRtsaObservation.html) and can be identified when the Observation.meta.profile="http://hl7.org/fhir/uv/phd/StructureDefinition/PhdRtsaObservation".
 - **string** measurements which are just arbitrary human-readable strings. These kinds of measurements are rare as they cannot be processed by machine. All measurements in this category follow the [Phd String Enumeration Observation Profile](PhdStringEnumerationObservation.html) and can be identified when the Observation.meta.profile="http://hl7.org/fhir/uv/phd/StructureDefinition/PhdStringEnumerationObservation".

### Common Observation Element Fields
Every PHD measurement Observation resource contains the following information regardless of the measurement value type:

|Measurement item|element|Description|
|-
|profile|Observation.meta.profile|This element contains the URL to the structure definition identifying the profile this Observation belongs to.|
|measurement type|Observation.code.coding.code|This element tells you what the measurement is. There shall be at least one coding element using the MDC coding system identified by Observation.code.coding.system="urn:iso:std:iso:11073:10101"<br>If a vital sign, there will be an additional coding element using one of the LOINC 'magic' codes. There will also be an Observation.category element as demanded by the vital signs profile. Additional coding elements representing the same concept as the MDC code in other coding systems may be present.|
|time stamp|Observation.dateTimeEffective<br/><br/>Observation.period|If the measurement is a point in time.<br/><br/>If the measurement has a duration.|
|PHG reference|Observation.extension.valueReference|This element points to the PHG Device resource. The resource contains information about the PHG that generated the FHIR resources. The gateway extension is the only extension used in this guide. It is identified by Observation.extension.url="http://hl7.org/fhir/StructureDefinition/observation-gatewayDevice"|
|patient reference|Observation.subject|Points to the Patient resource. Contains information about the patient to whom this measurement refers|
|PHD reference|Observation.device|Points to the PHD Device resource. This resource contains information about the PHD that took the measurement|

In addition to the elements that are always present, the following set of elements may be present.

|Measurement item|element|Description|
|-
|coincident time stamp|Observation.derivedFrom|Points to Observation following the Coincident Time Stamp Observation profile. For time quality auditing purposes. Only present when the PHD provides a time stamp |
|related measurement|Observation.derivedFrom|Points to a PHD Observation that is related to this Observation. An example would be a miles run measurement that points to the activity session measurement. Not present if the measurement does not reference an additional measurement.|
|additional descriptions|Observation.component|Sometimes a measurement is sent containing additional information such as the technique used to obtain the measurement. These elements are placed in a component.|
||Observation.identifier|IGNORE! This element is used to prevent data duplication during uploads. The reader should ignore this field.|

### Description of the Fields
In this section each of the fields summarized above is discussed.
#### The Profile: Observation.meta.profile
For the consumer the PHD profile element tells one what type of measurement value the Observation has. For example, if Observation.meta.profile entry contains "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdNumericObservation" one knows that this measurement is a scalar. As discussed in the Phd Numeric Observation Profile section, scalars are mapped to a valueQuantity element, thus one knows the value[x] element is of type valueQuantity, which may make parsing the value[x] element a little simpler.

#### The Measurement Type: Observation.code.coding.code
The measurement type tells what the measurement is. In HL7 such information is typically done through codes and it is no different here. However, one must understand the coding system in order to interpret what the code means. Consumers of the PHD profiles must understand the MDC code system to interpret the measurement. The MDC code system consists of 32-bit integers. Examples of some common MDC codes are

|MDC Code|Description|
|-
|150456|Pulse Oximeter Oxygen Saturation|
|149530|Pulse Oximeter Pulse Rate|
|188736|Body Mass|
|150020|Non invasive blood pressure|
|149546|Non invasive pulse rate|
|150364|Body temperature|
|188424|Oral temperature|
|160368|Glucose concentration in plasma|

A comprehensive list of MDC codes is available using the [NIST RTMSS Rosetta](https://rtmms.nist.gov/rtmms/index.htm).  It provides descriptions and, if applicable, the units associated with the measurement in both MDC and UCUM. The Rosetta is still a work in progress and one may find the user interface a little hard to navigate. One can find more information about the MDC code system [here](http://build.fhir.org/mdc.html).

For those consumer applications that would like to have the codes as LOINC and the uploader did not provide them, there is a mapping from MDC to LOINC available [here](https://loinc.org/collaboration/ieee/) with a direct link to the download [here](https://loinc.org/file-access/download-id/9385/). The FHIR MDC to LOINC concept map is available [here](https://fhir.loinc.org/ConceptMap/?url=http://loinc.org/cm/loinc-to-ieee-device-codes). One may freely download and use this material as needed in an implementation license free, but it does require that one create a (free) login account. At the time of this writing there is no comprehensive mapping of MDC to other code systems such as SNOMED CT. A mapping from MDC to SNOMED CT for some of the more common codes is available in the 2017 Continua Design Guidelines [H.813 HIS Interface](https://www.pchalliance.org/continua-design-guidelines) document. The guidelines are freely available for download, however it is not known what the licensing requirements are for use of the SNOMED CT code system.

##### Vital Signs
FHIR requires that a LOINC 'magic' code be present if the measurement is one of the vital signs given [here](http://build.fhir.org/observation-vitalsigns.html). In that case, the Observation.code shall have at least a second coding element containing the LOINC magic code. *The consumer must be aware that the MDC-to-LOINC mapping may be many to one*. For example, both the pulse rate obtained from a Blood Pressure Cuff (149546) and the pulse rate obtained from a Pulse Oximeter (149530) may be mapped to the same LOINC magic code (8867-4). In addition to the LOINC magic code, FHIR requires an Observation.category.coding.code element with value "vital-signs" when the measurement is a vital sign. When the measurement is not a vital sign, the PHD measurement profiles do not require an Observation.category element.

Below is a snippet showing a code element for a measurement type that is a vital sign (body temperature) along with the FHIR-required 'vital signs' category element:

    "category": [
        {
            "coding": [
                {
                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                    "code": "vital-signs",
                    "display": "Vital Signs"
                }
            ]
        }
    ],
    "code": {
        "coding": [
            {
                "system": "urn:iso:std:iso:11073:10101",
                "code": "150364"
            },
            {
                "system": "http://loinc.org",
                "code": "8310-5"
            }
        ],
        "text": "MDC_TEMP_BODY: Body temp"
    }

##### Caveats
The PHG may express the code in additional coding systems but the consumer cannot rely on it. The PHD profiles in this IG require *only* the MDC code as it is provided by the PHD and the LOINC magic code if the measurement is a vital sign. It is also possible that a vital sign is *not* mapped to LOINC by the PHG. By design, the PHG is written to map the data from the PHD without any knowledge to what the data is. The exception is for the LOINC magic codes which require the PHG to pre-code a map. If a new PHD specialization is created after the PHG is already implemented, the new PHD may possess a new MDC code and the new code may be a vital sign (perhaps the new code represents a pulse rate obtained via a new technique). The PHG can still populate the Observation.code.coding.code with the MDC code as that is provided in the PHD protocol, but the new MDC code will not be in its pre-coded local map of MDC codes to LOINC magic codes.

#### The Time Stamp: Observation.effective[x]
All measurements contain a time stamp which is either an instant in time, a dateTime data type, or a period of time, a Period data type. The period has both a start and end. Results of a workout session are a common type of measurement with a period. The 'instant' data type is not used as it is permissible for PHDs to report time at resolutions greater than a day in which case there is no time zone. An activity monitor reporting only daily summaries could be an example of a PHD using such a resolution.

All time stamps with resolutions finer than a day contain the offset to UTC. If the offset is -00:00, it means that the offset to local time is not known, and what is being reported is UTC time, even though the measurement is taken in Japan. If the offset is +00:00, it means the offset IS known; the measurement just happens to be in a time zone that is UTC. 

Below is an example of the effective[x] when the time stamp is an instant in time:

    "effectiveDateTime": "2019-05-10T16:47:31-04:00"

##### The Coincident Time Stamp
The consumer can obtain further information about the time stamp from the coincident time stamp Observation identified by the profile value "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdCoincidentTimeStampObservation". A reference to the coincident time stamp Observation may be present in the Observation.derivedFrom element. If the reference is NOT present, it means that the PHD did not provide a time stamp, and the PHG used the time of reception as the time stamp. Only PHDs that send live data are allowed to send measurements without time stamps.

If the PHD sent the measurement with a time stamp, there will be an Observation.derivedFrom element referencing the coincident time stamp Observation resource. This Observation resource can be used to see if the PHG needed to correct the time stamp, and if it did, by how much, or whether the PHD had a time fault. A time fault means the PHD had measurements with time stamps but lost its sense of current time for those measurements. Such an error could occur on a battery change or from a bug in the PHD code. If the PHD loses its sense of current time there is no way for the PHG to validate the time stamps or correct them. Time faults need to be reported to assure that the end user of the data is aware that the time stamps are untrustworthy.

Additional information about the Coincident Time Stamp can be found [here](CoincidentTimeStamp.html).

#### The PHG reference: Observation.extension.valueReference:
The reference to the Device resource containing the PHG properties is the only extension used in this implementation guide. An example of the element is shown below:

    "extension": [
        {
            "url": "http://hl7.org/fhir/StructureDefinition/observation-gatewayDevice",
            "valueReference": {
                "reference": "Device/12"
            }
        }
    ]

The extension is one of the [registered extensions](http://hl7.org/fhir/observation-profiles.html) for Observations.

#### The PHD reference: Observation.device:
The reference to the Device resource containing the properties of the PHD that took the measurement is placed in the Observation.device element.

#### The Patient reference: Observation.subject:
The reference to the Patient resource containing information about the patient upon whom the measurement was taken is placed in the Observation.subject element.

#### References to Other Observations: Observation.derivedFrom.reference:
There are situations where a given Observation is an important part of another Observation such as a glucose meal context measurement giving additional information about a glucose concentration measurement. In that case the context measurement will have an Observation.derivedFrom.reference element that points to the Observation resource containing the glucose measurement. Another common case where an Observation references another Observation is in an activity monitor. Results of an exercise session such as miles run, calories burned, average and maximum heart rates, etc. are reported as Observations where each Observation points to the master session Observation which has the activity type and duration (period).

The most common use of this element will be for referencing the Coincident Time Stamp Observation. Every measurement where the PHD provides a time stamp will reference a Coincident Time Stamp Observation.

An example of a reference to another Observation is shown below:

    "derivedFrom": [
        {
            "reference": "Observation/1294"
        }
    ]

There is no way to ascertain from the reference whether the Observation is a Coincident Time Stamp Observation or another measurement Observation. One must examine the Observation.meta.profile element of the referenced Observation to ascertain that information.

#### Additional Descriptions: Observation.component:
PHDs can send measurements that have additional descriptive information. An example would be a pulse oximeter indicating the modality used when taking the measurement. Some of the additional information reported can only occur if the measurement value is a of a specific value type such as a quantity. Additional information is reported in an Observation.component element. The type of additional information is given by the Observation.component.code element. The value of the additional information is given by the Observation.component.value[x] element. PHDs support the following types of additional information:

|Type of additional information|code|When it can occur|component.value[x]|Description|
|-
|supplemental type|68193 (MDC code)|Can occur with all measurement values|valueCodebaleConcept| provides a further description of the measurement type. Can be multiple supplemental type component entries.|
|relative time stamp|67985 (MDC code)|Can occur with all measurement values|valueQuantity| Gives the value of the time stamp when relative times are used|
|high resolution relative time stamp|68073 (MDC code)|Can occur with all measurement values|valueQuantity| Gives the value of the time stamp when high resolution relative times are used|
|Accuracy|67914 (MDC code)|Only Quantities|valueQuantity| Gives the accuracy of the measurement value in the units of the measurement value|
|Alert operational state|68746.n (ASN1ToHL7 code where n = 0, 1, or 2)|Only Quantities|valueCodeableConcept (V2 binary 'Y' or 'N')| Determines whether an alert threshold is off or on.|
|Alert operational text string|68104 (MDC code)|Only Quantities|valueString| A human readable string describing the lower and upper alert thresholds in that order.|
|Current Limits|67892 (MDC code)|Only Quantities|valueRange| The lower and upper threshold values in the units of the reported measurement quantity|
|Measurement Confidence 95|68236 (MDC code)|Only Quantities|valueRange| Gives a range that the manufacturer is 95% confident that the actual reported measurement is within that bounds|
|Threshold notification string|68232 (MDC code)|Only Quantities|valueString| Human readable string describing thresholds. Similar to the Alert operational text string|

At the time of this writing, only the supplemental types and the high resolution relative time stamp 'additional descriptions' are used by market PHDs. Some of the text string descriptions are unlikely to ever be used given that the IEEE 11073 20601 specification only allows ASCII 127 and consumers of the data are likely to provide their own descriptions customized to their locale.

##### Supplemental Types
Supplemental type information is indicated by the Observation.component.code.coding.code element having the value 68193. The value type of a supplemental type entry is always a CodeableConcept and is therefore given by Observation.component.valueCodeableConcept.coding.code. There may be more than one Observation.component entry containing supplemental type information. An example of a supplemental types component entry is as follows:

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "68193"
                    }
                ],
                "text": "MDC_ATTR_SUPPLEMENTAL_TYPES: Supplemental information"
            },
            "valueCodeableConcept": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "150588"
                    }
                ],
                "text": "MDC_MODALITY_SPOT: Modality Spot"
            }
        }
    ]

A 'spot modality' means that the pulse oximeter sensed over a period long enough to obtain a stable average.

##### Relative Times
A PHD may use a relative time clock. A relative time clock is nothing but a series of ticks with a fixed interval between ticks. The IEEE 11073 20601 standard allows for two types of relative time clocks where the standard specifies what the fixed interval between ticks is. Clearly such a clock is much simpler for a PHD to implement. As long as the PHD provides its current tick value, the PHG can convert these relative times to a user-friendly wall clock time. The time stamp reported in the Observation.effective[x] element is always the user-friendly wall clock time.

However, there may be use cases where the relative time stamp is desired. Relative time stamps have, by spec, a resolution of either 125 microseconds or microseconds depending upon which relative time clock is used. FHIR only reports time stamps to the millisecond. If one's use case requires knowing the time stamp to the microsecond, one will need to obtain the reported ticks in this component element. The coincident time stamp Observation will, in this case have information about the current relative time ticks, if, for some reason that is needed. 

Note that just because a PHD uses a relative time clock it does not mean that the PHD reports the time stamp at that resolution. One must look at the corresponding PHD Device resource to see what the actual resolution of the relative time clock is.

At the time of this writing there are no PHDs on the market that use relative time stamps because they need very precise time stamps for their measurements. Relative time stamp use has been for simplicity and reduced power consumption. Devices that need very precise time stamps are much more likely to be Point of Care Devices (PoCDs) used in hospital environments.

There are two types relative time stamps defined by IEEE 11073 20601. A 'relative time' with a maximum resolution of 125 microseconds and a 'high resolution relative time' with a maximum resolution of microseconds. Which relative time stamp is used is given by the MDC code in the Observation.component.code.coding.code element:

|MDC Code|Description|
|-
|67985|Relative Time|
|68073|High resolution relative time|

The value of the relative time is reported as a valueQuantity in units of microseconds for BOTH types of relative time stamps. An example of a component containing high resolution relative time stamp information is as follows:

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "68073"
                    }
                ],
                "text": "MDC_ATTR_TIME_STAMP_REL_HI_RES: High resolution relative time stamp"
            },
            "valueQuantity": {
                "value": 1234534,
                "system": "http://unitsofmeasure.org",
                "code": "us"
            }
        }
    ]

##### Accuracy
Accuracy information is indicated by the Observation.component.code.coding.code element having the value 67914. The accuracy applies only to measurement values that are quantities. It gives the maximum deviation as an absolute value of the reported measurement value from the actual measurement over the entire range of the measurement. It is reported in the units of the measurement itself. Though the IEEE 11073 specializations encourage providing this value it is not mandatory and few market PHDs implement it. An example of an accuracy entry for a thermometer is shown below:

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "67914"
                    }
                ],
                "text": "MDC_ATTR_NU_ACCUR_MSMT: Measurement accuracy"
            },
            "valueQuantity": {
                "value": 0.1,
                "system": "http://unitsofmeasure.org",
                "code": "Cel"
            }
        }
    ]

##### Current Limits
The Current Limits component is currently only used in the Pulse Oximeter specialization. It gives the low and high threshold limit values of the primary measurement being monitored. The Current Limits  applies only to measurement values that are quantities. When either threshold limit is met an alarm event is triggered if the alarm for the given threshold limit is enabled. If this component is present, an Alert Operational State component shall also be present which indicates the disabled/enabled state of the alarms.

The entry is indicated by the Observation.component.code.coding.code element having the value 67892. The value is encoded in an Observation.component.valueRange element. The units have the same units as the primary measurement. An example of a Current Limits entry is shown below:

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "67892"
                    }
                ],
                "text": "MDC_ATTR_LIMIT_CURR: Current lower and upper alarm threshold values"
            },
            "valueRange": {
                "low": {
                    "value": 88,
                    "system": "http://unitsofmeasure.org",
                    "code": "%"
                },
                "high": {
                    "value": 100,
                    "system": "http://unitsofmeasure.org",
                    "code": "%"
                }
            }
        }
    ]

##### Alert Operational State
The Alert Operational State is identified by an Observation.component.coding.code containing one of three possible [ASN1ToHL7](ASN1ToHL7.html) codes 67846.n where n is 0, 1, or 2. When reported, there will be a component entry for all three states. The Alert Operational state is used in the Pulse Oximeter specialization, but currently there is no market pulse oximeter that implements it. The Alert Operational State applies only to measurement values that are quantities. 

The Alert Operational State is a state and not en event. It indicates that the PHD supports an alert mechanism for the primary measurement. It does not indicate that the alert has been triggered. What these alert thresholds might be are indicated in the Current Limits component. A PHD that reports this state shall also report the Current Limits values.

The value of the component entry is a CodeableConcept using the V2 binary code system of "Y" or "N". *When the value is "Y", the condition is disabled which maybe contrary to expectation*. The three entries are as follows:

|ASN1ToHL7 Code|Description|
|-
|67846.0|Indicates both the high and the low limit alerts are *disabled* when "Y"|
|67846.1|Indicates the low limit alert is *disabled* when "Y"|
|67846.2|Indicates the high limit alert is *disabled* when "Y"|

An example of an entry where the low alert alarm is enabled is as follows:

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7",
                        "code": "67846.0"
                    }
                ],
                "text": "lim-alert-off: Alerts limits state"
            },
            "valueCodeableConcept": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                        "code": "N"
                    }
                ],
                "text": "At least one alert limit is enabled"
            }
        },
        {
            "code": {
                "coding": [
                    {
                        "system": "http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7",
                        "code": "67846.1"
                    }
                ],
                "text": "lim-low-off: Alerts lower limit state"
            },
            "valueCodeableConcept": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                        "code": "N"
                    }
                ],
                "text": "The lower alert limit is enabled"
            }
        },
        {
            "code": {
                "coding": [
                    {
                        "system": "http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7",
                        "code": "67846.2"
                    }
                ],
                "text": "lim-high-off: Alert high limit state"
            },
            "valueCodeableConcept": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                        "code": "Y"
                    }
                ],
                "text": "The high alert limit is disabled"
            }
        }
    ]

It may be convenient for implementers to take advantage of the fact that every ASN1ToHL7 code, though an alpha-numeric string and not a decimal number, contains an MDC code. The digits on the left hand side of the period, when converted to an integer, is an MDC code. The MDC code 67846 in the example above is the Alert Operational State Attribute identifier.

##### Alert Operational Text String
The Alert Operational Text String provides a human readable string describing the lower and upper threshold limits expressed in the Current Limits component. It is currently used only in the Pulse Oximeter specialization. The Alert Operational Text String applies only to measurement values that are quantities.

The entry is indicated by the Observation.component.code.coding.code element having the value 68104. The text string is limited to US ASCII. The value is encoded in the Observation.component.valueString element. Both the 'low' and 'high' strings are encoded into a single valureString entry in an application-dependent manner. The strings are not machine processable.

An example of a component entry is as follows:

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "678104"
                    }
                ],
                "text": "MDC_ATTR_AL_OP_TEXT_STRING: PHD provided threshold descriptions"
            },
            "valueString": "Low limit for SpO2 - High limit for SpO2"
        }
    ]

##### Measurement Confidence 95
The Measurement-Confidence-95 component is currently used only in the Continuous Glucose specialization. The compoent gives a lower and upper bound between which the manufacturer is 95% confident that the actual reported measurement is within that bounds. The Measurement Confidence 95 applies only to measurement values that are quantities. 

The entry is indicated by the Observation.component.code.coding.code element having the value 68236. The value is encoded in an Observation.component.valueRange element. The ranges have the same units as the primary measurement. An example of a Measurement Confidence 95 entry is shown below:

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "68236"
                    }
                ],
                "text": "MDC_ATTR_MSMT_CONFIDENCE_95: Current lower and upper alarm threshold values"
            },
            "valueRange": {
                "low": {
                    "value": 98,
                    "system": "http://unitsofmeasure.org",
                    "code": "mg/dL"
                },
                "high": {
                    "value": 100,
                    "system": "http://unitsofmeasure.org",
                    "code": "mg/dL"
                }
            }
        }
    ]

The above states that the Continuous Glucose Monitor PHG is 95% sure that the reported measurement of (say 99 mg/dL) lies between 98 and 100 mg/dL.

##### Threshold Notification String
This component contains a human readable string regarding the various threshold settings a PHD might have. Currently, only the Continuous Glucose Monitor speocialization defines the use of this string with respect to its threhold settings. The Threshold Notification String applies only to measurement values that are quantities. 

The entry is indicated by the Observation.component.code.coding.code element having the value 68232. The text string is limited to US ASCII. The value is encoded in the Observation.component.valueString element.

An example of a component entry is as follows:

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "68232"
                    }
                ],
                "text": " MDC_ATTR_THRES_NOTIF_TEXT_STRING: PHD provided information about the threshold"
            },
            "valueString": "Glucose concentration has gone under the minimum"
        }
    ]


### Measurement Status
Every real device is going to experience challenges at some time. These challenges can interfere with the measurement and therefore need to be reported. One could argue that measurements with errors should not be delivered, but in a scenario where the PHG might be headless and one is happy that the patient can even take the measurement, it may be important to know that the measurement attempt was made. Therefore this IG will report any measurement it receives from the PHD including error states and let the end user decide what to do with it.

There are other non-error special conditions that may also be reported, such as the measurement is test or demo data.

Depending upon what the special condition is, it is reported in either the dataAbsentReason, interpretation, or meta.security element. All of these entries are CodeableConcepts. When the condition is reported in the dataAbsentReason, there will be no measurement value entry in accord with the FHIR specification, even if the PHD reports a measurement value. Note that there may be multiple interpretation entries but only one dataAbsentReason element.

The table below lists the special conditions reported and in what elements they are found. The code system from which the code is drawn is also shown.

|Condition reported by PHD | Observation element and code system used|
|-
|measurement invalid|dataAbsentReason.coding.code="error"<br/>dataAbsentReason.coding.system="http://terminology.hl7.org/CodeSystem/data-absent-reason"|
|measurement questionable|interpretation.coding.code="questionable" <br/> interpretation.coding.system="http://hl7.org/fhir/uv/pocd/CodeSystem/measurement-status" |
|measurement not available|dataAbsentReason.coding.code="not-performed"<br>dataAbsentReason.coding.system="http://terminology.hl7.org/CodeSystem/data-absent-reason |
|calibration ongoing|interpretation.coding.code="calibration-ongoing"<br/> interpretation.coding.system="http://hl7.org/fhir/uv/pocd/CodeSystem/measurement-status" |
|test data|meta.security.coding.code="HTEST"<br/> meta.security.coding.system="http://terminology.hl7.org/CodeSystem/v3-ActReason" |
|demo data|meta.security.coding.code="HTEST"<br/> meta.security.coding.system="http://terminology.hl7.org/CodeSystem/v3-ActReason" |
|validated data|interpretation.coding.code="validated-data" <br/>interpretation.coding.system="http://hl7.org/fhir/uv/pocd/CodeSystem/measurement-status"  |
|early indication|interpretation.coding.code="early-indication" <br/> interpretation.coding.system="http://hl7.org/fhir/uv/pocd/CodeSystem/measurement-status" |
|measurement ongoing|dataAbsentReason.coding.code="temp-unknown"<br>dataAbsentReason.coding.system="http://terminology.hl7.org/CodeSystem/data-absent-reason" |
|measurement value exceeded boundaries|interpretation.coding.code="in-alarm" <br/>interpretation.coding.system="http://hl7.org/fhir/uv/pocd/CodeSystem/measurement-status" |
|alarm indication turned off|interpretation.coding.code="alarm-inhibited"<br/>interpretation.coding.system="http://hl7.org/fhir/uv/pocd/CodeSystem/measurement-status" |

In addition to the conditions listed above, when the measurement value is a quantity, PHDs may also report one of a set of special values, "Not a Number", "Positive infinity", or "Negative infinity". These errors can results from a failure of the floating point software or hardware, or the inability of the sensor to completely acquire a value. These errors are reported in the dataAbsentReason element and will be discussed in the sections discussing the measurement values. "Not a Number" is the most common special condition reported by PHDs currently on the market. Reporting of the other special situations listed above are, in practice, rare.

#### Identifier
The Observation.identifier entry created by this IG is *not* for consumption. It is for preventing data duplication during uploads. It is used in conditional create transactions. Consumers are expected to ignore the element.

### Scalar Numeric Measurements
Scalar numeric measurements are the most common type of measurement reported by PHDs. Temperature, weight, height, miles run, pulse rate, etc. are examples. Scalar numeric measurements are reported in Observation resources following the Phd Numeric Observation Profile. The scalar values are reported in the Observation.valueQuantity element. If the PHD reports a special value; Not a number, Positive infinity, Negative infinity, and two other possible values unknown to FHIR, an Observation.dataAbsentReason element replaces the valueQuantity and there is no value[x] element.

An Observation resource following the Phd Numeric Observation Profile will have an Observation.meta.profile entry containing "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdNumericObservation".

When there is no special value the Observation.valueQuantity is populated with the scalar value, the units, and the system. The units and system are UCUM unless the PHG does not know the UCUM translation for the MDC unit code. The latter can happen if a new specialization, written after the PHG was implemented, introduces a new MDC unit code not previously used in PHDs. The scalar value is reported with the precision indicated by the PHD. Thus 2 and 2.00 represent the same value but measured to a different precision.

|FHIR element|Description|
|-
|Observation.valueQuantity.value|Measurement value: It will have the precision reported by the PHD, thus the numerical value 2 could be reported as 2, 2.0, or 2.00 depending upon the sensor precision|
|Observation.valueQuantity.code|units in UCUM|
|Observation.valueQuantity.system="http://unitsofmeasure.org"|code system is UCUM|

If a special value is reported an Observation.dataAbsentReason replaces the valueQuantity. The dataAbsentReason is a CodeableConcept and will have the following possible codes from the data absent reason coding system "http://terminology.hl7.org/CodeSystem/data-absent-reason":

 - Observation.dataAbsentReason.coding.code="not-a-number"
 - Observation.dataAbsentReason.coding.code="positive-infinity"
 - Observation.dataAbsentReason.coding.code="negative-infinity"
 - Observation.dataAbsentReason.coding.code="error"

The Observation.dataAbsentReason.coding.system in the above cases is always

 - Observation.dataAbsentReason.coding.system="http://terminology.hl7.org/CodeSystem/data-absent-reason"

IEEE 11073 20601 defines two other special values that are not translated to FHIR which are encoded as "error". To date, there has been no market PHD which reports the other two special values.

An example of the valueQuantity in the Phd Numeric Observation Profile for a thermometer reporting a value of 35.6 &deg;C is as follows:

    "valueQuantity": {
        "value": 35.6,
        "system": "http://unitsofmeasure.org",
        "code": "cel"
    }

### Vector or Compound Numeric Measurements
Compound or vector quantities are reported in components. There is one component for each compound entry or vector projection. A vector or compound measurement follows the Phd Compound Numeric Observation Profile. An Observation follows the compound profile if the Observation.meta.profile contains a "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdCompoundNumericObservation" entry.

There is no primary Observation.value[x] entry and there is no Observation.dataAbsentReason unless the *entire* measurement had an error, in which case there will be no compound entries either. It is possible for each compound entry to have its own error and that will be reported in an Observation.component.dataAbsentReason element. All Observation.component entries could have dataAbsetnReason entry but that does NOT mean the entire measurement has an Observation.dataAbsentReason entry. It is also possible that a component will have its own interpretation element of the same type as shown in the Measurement Status section. Currently there are no market PHDs that generate an Observation.component.interpretation element.

Compound Observations will have a code indicating what the 'entire' measurement is, for example, non-invasive blood pressure or acceleration. Each Observation.component element will have its own code describing each individual compound or vector entry, for example, the systolic, diastolic, and mean pressures for the blood pressure or x-, y-, and z-projections of an acceleration.

Each Observation.component will have the following:

|FHIR element|Description|
|-
|Observation.componentN.code.coding.code|MDC code telling what the entry is|
|Observation.componentN.code.coding.system="urn:iso:std:iso:11073:10101"|MDC code system identifier|
|Observation.component.valueQuantity.value|the scalar value of the given entry with the precision indicated by the PHD|
|Observation.component.valueQuantity.code|the units (as UCUM)|
|Observation.component.valueQuantity.system="http://unitsofmeasure.org"|UCUM code system identifier|

Note that the Observation.component.code element is subject to the same FHIR LOINC magic code requirement as the Observation.code element if the component is one of the vital signs [here](http://build.fhir.org/observation-vitalsigns.html). The Systolic and diastolic pressures are in that list, but the MEAN component is not.

An example of a Blood Pressure measurement would be as follows:

The Observation.code and Observation.category (since the measurement is a vital sign) entries describing the 'entire' measurement:

    "category": [
        {
            "coding": [
                {
                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                    "code": "vital-signs"
                }
            ],
            "text": "Vital Signs"
        }
    ]
    "code": {
        "coding": [
            {
                "system": "urn:iso:std:iso:11073:10101",
                "code": "150020"
            },
            {
                "system": "http://loinc.org",
                "code": "55284-4"
            }
        ],
        "text": "MDC_PRESS_BLD_NONINV: Blood pressure"
    },

and the individual Observation.component entries describing each compound entry where the MEAN entry was unable to be determined and reported a NaN (Not a Number):

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "150021"
                    },
                    {
                        "system": "http://loinc.org",
                        "code": "8480-6"
                    }
                ],
                "text": "MDC_PRESS_BLD_NONINV_SYS: Systolic blood pressure"
            },
            "valueQuantity": {
                "value": 116,
                "system": "http://unitsofmeasure.org",
                "code": "mmHg"
            }
        },
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "150022"
                    },
                    {
                        "system": "http://loinc.org",
                        "code": "8462-4"
                    }
                ],
                "text": "MDC_PRESS_BLD_NONINV_DIA: Diastolic blood pressure"
            },
            "valueQuantity": {
                "value": 71,
                "system": "http://unitsofmeasure.org",
                "code": "mmHg"
            }
        },
        {
            "code": {
                "coding": [
                    {
                        "system": "urn:iso:std:iso:11073:10101",
                        "code": "150023"
                    }
                ],
                "text": "MDC_PRESS_BLD_NONINV_MEAN: Mean blood pressure"
            },
            "dataAbsentReason": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/data-absent-reason",
                        "code": "not-a-number"
                    }
                ],
                "text": "not-a-number (Not a number)"
            },
        }
    ]

The Phd Compound Numeric Entry Profile can contain additional compound entries as noted in the [Additional Descriptions](#additional-descriptions-observationcomponent) section above. However, the codes of all Observation.component entries that are part of a compound measurement will always have an MDC entry (not ASN1ToHL7) and the MDC entry will ***never*** have a partition value (the upper 16 bits) equal to 1.

### Measurement Values that are Codes
Sometimes the PHD measurement value is a code. Measurements that are codes follow the Phd Coded Enumeration Observation profile. Observations following that profile will have an Observation.meta.profile entry containing "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdCodedEnumerationObservation".

The measurement value is reported in an Observation.valueCodeableConcept element. Coded measurements are usually 'context' measurements that provide extra information about another measurement. They will often have an Observation.derivedFrom reference pointing to the Observation resource they support. There are no coded enumeration measurements that are vital signs.

An example of a coded measurement is a meal context in a glucose monitor:

    "valueCodeableConcept": {
        "coding": [
            {
                "system": "urn:iso:std:iso:11073:10101",
                "code": "8417872"
            }
        ],
        "text": "MDC_CTXT_GLU_MEAL_POSTPRANDIAL: After lunch/dinner"
    }

This measurement indicates that the glucose concentration measurement was taken after a meal.

### Measurement Values that are Events or States
PHDs support a measurement value type that indicate a set of states or events, for example, an independent living monitor may be surveilling an elderly patient's room and report its current state 'door closed', 'window closed', 'climate control on', 'patient in room', and 'lights off'. The report may have been triggered by an event like 'patient entered room'. (There is no such measurement type as a current room state but it illustrates the concept.) PHDs have an efficient way to package such reports into a single integer. This type of reporting is done when more than one state and/or event can occur simultaneously. In order to understand such a report one has to know what the state or event is, and its value. States and events are binary. A state is either on or off and an event either happens or it doesn't. There is no corresponding HL7 data type for this kind of measurement thus the [ASN1ToHL7](ASN1ToHL7.html) code system has been developed to express these states and events as codes. The V2 binary "Y"/"N" code system is used to express the corresponding values.

Measurement values that fall into this category are mapped to an Observation following the Phd Bits Enumeration Observation profile. An Observation following this profile is indicated by an Observation.meta.profile entry containing "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdBitsEnumerationObservation".

Each event or state is reported in a component element. The Observation.component.code will be the ASN1ToHL7 code indicating what the state or event is. The value of the state or event will be in an Observation.component.valueCodeableConcept entry using the V2 binary code system. It should be noted that 'state' values must be reported for either state. It is as important know whether the door is opened or closed. Events are only required to be reported when they happen.

Implementers should not make any assumption about the state assignment. For example, to assume that 'something opened' is signified by a "Y" can lead to misinterpretation. The monitor specification may have been designed with the idea that everything closed was the desired state and signified it with "Y". The ASN1ToHL7 code system will have the assignment and readers will need to examine it.

In future PHD versions the PHD will be able to indicate that is does not support certain state or event flags in a given measurement report. This situation is expressed by replacing the Observation.component.valueCodeableConcept element with an Observation.component.dataAbentReason element with reason "unsupported". Currently there are no market PHDs that support this feature.

Event and/or state measurements have no primary Observation.value[x] entry and there is no Observation.dataAbsentReason unless the *entire* measurement has an error, in which case there will be no state of event entries either. It is possible for each state or event entry to be unsupported and that will be reported with a Observation.component.dataAbsentReason element. Even if every Observation.component entry reports 'unsupported' that does not have the same meaning as the entire measurement being in error.

In structure the states and/or events measurements are similar to compound or vector measurements. It is also possible that state and/or event measurements have '*additional descriptions*' as discussed in the [Additional Descriptions](#additional-descriptions-observationcomponent) section. To distinguish the measurement component entries from the additional description component entries one only needs to examine the Observation.component.code.coding.system. If it is ASN1ToHL7, it is part of the measurement. The ASN1ToHL7 additional description entry [alert operation state](#alert-operational-state) is not possible in a state or event measurement.

Each Observation.component entry will have the following:

|FHIR element|Description|
|-
|Observation.component.code.coding.code|ASN1ToHL7 code telling what the entry is|
|Observation.component.code.coding.system="http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7"|ASN1ToHL7 code system identifier|
|Observation.component.valueCodeableConcept.coding.code|either "Y" or "N"|
|Observation.component.valueCodeableConcept.coding.systen="http://terminology.hl7.org/CodeSystem/v2-0136"|the V2 binary code system|

The 'independent living' example mentioned above does not currently exist in any specialization but it is illustrative of the concept. However, a pulse oximeter device sensor status measurement containing several different events does exist. An example of such a measurement is shown below:

The overall measurement type is given in the Observation.code element:

    "code": {
            "coding": [
                {
                    "system": "urn:iso:std:iso:11073:10101",
                    "code": "150604"
                }
            ],
            "text": "MDC_PULS_OXIM_DEV_STATUS: Measuring process issues"
        }

and the components containing the events:

    "component": [
        {
            "code": {
                "coding": [
                    {
                        "system": "http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7",
                        "code": "150604.2"
                    }
                ],
                "text": "sensor-displaced"
            },
            "valueCodeableConcept": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/v2-0136",
                        "code": "Y"
                    }
                ],
                "text": "Sensor is incorrectly placed on user"
            }
        },
        {
            "code": {
                "coding": [
                    {
                        "system": "http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7",
                        "code": "150604.7"
                    }
                ],
                "text": "signal-pulse-questionable"
            },
            "valueCodeableConcept": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/v2-0136",
                        "code": "Y"
                    }
                ],
                "text": "Questionable pulse detected"
            }
        },
        {
            "code": {
                "coding": [
                    {
                        "system": "http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7",
                        "code": "150604.10"
                    }
                ],
                "text": "signal-low-perfusion"
            },
            "valueCodeableConcept": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/v2-0136",
                        "code": "Y"
                    }
                ],
                "text": "Signal experiencing low perfusion"
            }
        },
        {
            "code": {
                "coding": [
                    {
                        "system": "http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7",
                        "code": "150604.11"
                    }
                ],
                "text": "signal-poor"
            },
            "valueCodeableConcept": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/v2-0136",
                        "code": "Y"
                    }
                ],
                "text": "Signal is poor"
            }
        },
        {
            "code": {
                "coding": [
                    {
                        "system": "http://hl7.org/fhir/uv/phd/CodeSystem/ASN1ToHL7",
                        "code": "150604.12"
                    }
                ],
                "text": "signal-inadequate"
            },
            "valueCodeableConcept": {
                "coding": [
                    {
                        "system": "http://terminology.hl7.org/CodeSystem/v2-0136",
                        "code": "Y"
                    }
                ],
                "text": "Signal is inadequate"
            }
        }
    ]

All of the entries are events in this example so the values are always "Y" indicting the event occurred. One might note that the ANS1ToHL7 code 150604.*x* in all cases contains the MDC code of the measurement 150604. That relationship will always be true for all event and state measurement value types. In addition, the MDC code of the overall measurement will never have a partition (the upper 16 bits) value of 1.

### Periodic measurements
Periodic measurements are typically waveforms like ECG traces and are a sequence of scalars.
Measurement values that fall into this category are mapped to an Observation following the Phd Rtsa Observation profile. An Observation following this profile is indicated by an Observation.meta.profile entry containing "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdRtsaObservation". 'Rtsa' means real time sample array.

Periodic measurements are reported in Observation.valueSampledData and Observation.referenceRange elements as follows:

|FHIR element|Description|
|-
|Observation.valueSampledData.data[i]|Contains the scaled samples separated by spaces|
|Observation.valueSampledData.origin.code<br/>Observation.valueSampledData.origin.system|Contains the units (as UCUM) <br/>"http://unitsofmeasure.org"|
|Observation.valueSampledData.origin.value|Contains the intercept value in the rescaling equation|
|Observation.valueSampledData.scaleFactor|Contains the scale factor in the rescaling equation|
|Observation.valueSampledData.period|gives the time interval between samples in milliseconds|
|Observation.valueSampledData.dimensions|Always 1 in PHD (multi-dimensional arrays are not supported)|
|Observation.referenceRange.high.value|Upper value that the original sequence can obtain|
|Observation.referenceRange.high.code<br/>Observation.referenceRange.high.system|the units of the upper value (as UCUM) which shall be the same as the units in the valueSampledData element <br/>"http://unitsofmeasure.org"|
|Observation.referenceRange.low.value|Lower value that the original sequence can obtain|
|Observation.referenceRange.low.code<br/>Observation.referenceRange.low.system|the units of the lower value (as UCUM) which shall be the same as the units in the valueSampledData element <br/>"http://unitsofmeasure.org"|

To obtain the original values of the measured sequence one uses the following equation:

    original_value[i] = valueSampledData.scaleFactor * valueSampledData.data[i] + valueSampledData.origin.value

or the familiar equation of a line

     y(i) = mx(i) + b

The Observation.referenceRange element is for convenience and is not necessary for decoding the data. It was designed for plotting as it gives the upper and lower bounds of the trace at any time (it does not mean that either value is obtained in the transmitted sequence). One can create a graph with such limits without examining the sequence.

It is possible that the periodic measurement is a vital sign, for example, a heart rate. If it is a vital sign, the same magic code rules apply as they do for scalar and vector measurements.

### String measurements
PHDs can send a measurement value that is just an arbitrary human readable string. An example of such a measurement might be the name of an exercise program on a piece of gym equipment.

String measurement values are mapped to an Observation following the Phd String Enumeration Observation profile. An Observation following this profile is indicated by an Observation.meta.profile entry containing "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdStringEnumerationObservation".

The measurement is reported in an Observation.valueString element which has the value of the human readable string.

An example of this measurement is as follows:

    "valueString": "Test Strip Buckled"

String measurements are rare in PHDs.

### The PHD Coincident Time Stamp Observation Resource
The coincident time stamp is a comparison of the PHD's and PHG's time lines. PHDs have limited resources and are often battery driven and therefore depend upon the user or the PHG to set its time. Though it is possible for PHDs to support an external time synchronization there are currently no market PHDs that do such. The time lines of PHDs can therefore be dubious. PHGs are required to support external time synchronization and if possible, to obtain the local offset to UTC.

In the PHD-PHG exchange, the PHG asks the PHD for its current time, time synchronization state, and accuracy. At the time of the query the PHG also records its current time. The PHG compares the two time lines, the two states of synchronization, and the two states of synchronization accuracy. If the PHG is better synchronized, the PHG will correct the PHD reported times by the difference between the two time lines. The PHG will also set the PHD's time if the PHD supports it, automatically bringing the two time lines into synchrony. 

If the PHD is better synchronized than the PHG, the PHG reports the PHD's times unaltered.

The coincident time stamp also indicates whether there is a time fault. In the case of relative times, the coincident time stamp provides the 'anchor' that allows the PHG to create wall clock times from the PHD's 'tick' values.

The following core information is available from the coincident time stamp observation:

|FHIR element|Description|
|-
|Observation.code.coding.code|MDC code that indicates what type of time clock is used by PHD. It is one of:<br/>absolute time (local time with no offset to UTC)<br/>base offset time (local time with offset to UTC)<br/>relative time (a tick count)<br/>high resolution relative time (a tick count with high resolution)|
|Observation.effectiveDateTime|the PHG's current time - absent if the PHD is better synchronized than the PHG|
|Observation.valueDateTime<br/>Observation.valueQuantity<br/>Observation.dateAbsentReason.coding.code="unknown"|the PHD's current time if base offset or absolute time<br/>the PHD's current time if a relative time<br/>PHD has a time fault|

If the Observation containing the measurement has no reference to a coincident time stamp, it means the PHD provided no measurement time stamp and the PHG used the time of reception as the current time stamp.

The coincident time stamp follows the Phd Coincident Time Stamp Observation Profile. An Observation following this profile is indicated by an Observation.meta.profile entry containing "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdCoincidentTimeStampObservation".

All readers should check whether or not there is a time fault. Otherwise the information provided by this Observation is mostly for auditing.

### The PHD Device Resource
The PHD Device resource follows the Phd Device Profile. It is identified by the Device.meta.profile element containing the entry "http://hl7.org/fhir/uv/phd/StructureDefinition/PhdDevice".

The PHD Device resource contains the following information about the PHD in the following elements:

 - Device.identifier
   -  **IEEE EUI-64 System identifier**
   - IEEE EUI-48 Bluetooth Address if the PHD uses Bluetooth transports
   - EUI-64 ZigBee address if the PHD uses ZigBee transports
   - USB Pid and Vid values if the PHD uses USB transports
 - Device.manufacturer
   - **Manufacturer name**
 - Device.modelNumber
   - **Model number**
 - Device.serialNumber
   - *serial number*
 - Device.partNumber
   - part number
 - Device.type
   - **PHD (Simple MDS)**
 - Device.version
   - *firmware version*
   - hardware version
   - software version
   - protocol version
   - Continua version
 - Device.specialization
   - **Specialization (Blood pressure, thermometer, etc.)**
   - **Specialization version**
 - Device.property
   - *Time clock capabilities*
   - **Time clock synchronization method**
   - Time synchronization accuracy
   - Time clock resolution
   - Regulation status
   - Certified transports and specializations

The bold items are required to be reported by all PHDs and the italicized items are exposed by most PHDs. The transport addresses are only exposed in the transport protocol and are, of course, only applicable to PHDs using that transport.

#### Device identifier
The identifier contains elements that are (supposed) to uniquely identify the PHD. To distinguish one identifier from another, especially in the case where two identifiers are the same 'bitness' a code from the [ContinuaDeviceIdentifiers](ContinuaDeviceIdentifiers.codesystem.html) code system is used in the Device.identifier.type. There are five possible codes defined:

|code|Description|
|-
|SYSID|The IEEE EUI-64 system identifier, required in all IEEE 11073 20601 PHDs|
|BTMAC|The IEEE EUI-48 Bluetooth address|
|ETHMAC|The ethernet mac address|
|ZIGBEE|The 64-bit ZigBee address|
|USB|The USB PID and VIS number|

The 

### Links to the Profile Structure Definitions

 - [Base Observation Profile](PhdBaseObservation.html)
 - [Numeric Observation Profile](PhdNumericObservation.html)
 - [Compound Numeric Observation Profile](PhdCompoundNumericObservation.html)
 - [Coded Enumeration Observation Profile](PhdCodedEnumerationObservation.html)
 - [BITs Enumeration Observation Profile](PhdBITsEnumerationObservation.html)
 - [Rtsa Observation Profile](PhdRtsaObservationProfile.html)
 - [String Enumeration Observation Profile](PhdStringEnumerationObservation.html)
 - [Coincident Time Stamp Observation Profile](PhdCoincidentTimeStampObservation.html)
 - [Phd Device Profile](PhdDevice.html)
 - [Phg Device Profile](PhgDevice.html)
 - [Patient Profile](PhdPatient.html)




 
